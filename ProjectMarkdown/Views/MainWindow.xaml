<Window x:Class="ProjectMarkdown.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewModels="clr-namespace:ProjectMarkdown.ViewModels"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
        xmlns:wpf="clr-namespace:CefSharp.Wpf;assembly=CefSharp.Wpf"
        xmlns:customControls="clr-namespace:ProjectMarkdown.CustomControls"
        mc:Ignorable="d"
        Title="{Binding CurrentDocument.Metadata.FilePath, Mode=OneWay}" Height="600" Width="800"
        Name="MWindow">
    <Window.DataContext>
        <viewModels:MainWindowViewModel/>
    </Window.DataContext>
    <i:Interaction.Triggers>
        <i:EventTrigger EventName="Closed">
            <i:InvokeCommandAction Command="{Binding MainWindowClosingEventCommand}"></i:InvokeCommandAction>
        </i:EventTrigger>
    </i:Interaction.Triggers>
    <DockPanel LastChildFill="True" >
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="File">
                <MenuItem Header="New" InputGestureText="Ctrl + N" Command="{Binding CreateNewDocumentCommand}"/>
                <MenuItem Header="Open" InputGestureText="Ctrl + O" Command="{Binding OpenDocumentCommand}"/>
                <MenuItem Header="Open Containing Folder" Command="{Binding OpenContainingFolderCommand}"/>
                <MenuItem Header="Save" InputGestureText="Ctrl + S" Command="{Binding SaveDocumentCommand}"/>
                <MenuItem Header="Save All" InputGestureText="Ctrl + Shift + S" Command="{Binding SaveAllDocumentsCommand}"/>
                <MenuItem Header="Save As..." InputGestureText="Ctrl + Alt + S" Command="{Binding SaveAsDocumentCommand}"/>
                <MenuItem Header="Export">
                    <MenuItem Header="Markdown" Command="{Binding ExportMarkdownCommand}"></MenuItem>
                    <MenuItem Header="Html" Command="{Binding ExportHtmlCommand}"></MenuItem>
                    <MenuItem Header="PDF" Command="{Binding ExportPdfCommand}"></MenuItem>
                </MenuItem>
                <MenuItem Header="Close">
                    <MenuItem Header="All" InputGestureText="Ctrl + Shift + W" Command="{Binding CloseAllDocumentsCommand}"></MenuItem>
                    <MenuItem Header="Active Document" InputGestureText="Ctrl + W" Command="{Binding CloseActiveDocumentCommand}"></MenuItem>
                    <MenuItem Header="All but Active Document" InputGestureText="Ctrl + Alt + W" Command="{Binding CloseAllButActiveDocumentCommand}"></MenuItem>
                </MenuItem>
                <Separator/>
                <MenuItem Header="Print" InputGestureText="Ctrl + P" Command="{Binding PrintCommand}"/>
                <Separator/>
                <MenuItem Header="Exit" InputGestureText="Alt + F4" Command="{Binding ExitCommand}"/>
            </MenuItem>
            <MenuItem Header="Edit">
                <MenuItem Header="Undo" InputGestureText="Ctrl + Z"/>
                <MenuItem Header="Redo" InputGestureText="Ctrl + Y"/>
                <Separator/>
                <MenuItem Header="Cut" InputGestureText="Ctrl + X"/>
                <MenuItem Header="Copy" InputGestureText="Ctrl + C"/>
                <MenuItem Header="Paste" InputGestureText="Ctrl + V"/>
                <MenuItem Header="Delete" InputGestureText="DEL"/>
                <MenuItem Header="Select All" InputGestureText="Ctrl + A"/>
            </MenuItem>
            <MenuItem Header="Search">
                <MenuItem Header="Find..." InputGestureText="Ctrl + F"/>
                <MenuItem Header="Find Next" InputGestureText="F3"/>
                <MenuItem Header="Find Previous" InputGestureText="Shift + F3"/>
                <MenuItem Header="Replace..." InputGestureText="Ctrl + H"/>
            </MenuItem>
            <MenuItem Header="Settings">
                <MenuItem Header="Preferences..."/>
                <MenuItem Header="Theme">
                    <MenuItem Header="Default"/>
                    <MenuItem Header="Dark"/>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="Window"/>
        </Menu>
        <ToolBarTray DockPanel.Dock="Top" Height="30">
            <ToolBar>
                <Button Name="BtnNewDocument">
                    <Image Source="../Images/new.png" Height="24" Width="24"></Image>
                </Button>
                <Button Name="BtnOpenDocument">
                    <Image Source="../Images/open.png" Height="24" Width="24"></Image>
                </Button>
                <Button Name="BtnSaveDocument">
                    <Image Source="../Images/save.png" Height="24" Width="24"></Image>
                </Button>
                <Button Name="BtnSaveAllDocuments">
                    <TextBlock Text="Save All"></TextBlock>
                </Button>
                <Button Name="BtnCloseDocument">
                    <Image Source="../Images/close.png" Height="24" Width="24"></Image>
                </Button>
                <Button Name="BtnCloseAllDocuments">
                    <TextBlock Text="Close All"></TextBlock>
                </Button>
                <Button Name="BtnPrintDocument">
                    <Image Source="../Images/print.png" Height="24" Width="24"></Image>
                </Button>
                <Button Name="BtnCut">
                    <Image Source="../Images/cut.png" Height="24" Width="24"></Image>
                </Button>
                <Button Name="BtnCopy">
                    <Image Source="../Images/copy.png" Height="24" Width="24"></Image>
                </Button>
                <Button Name="BtnPaste">
                    <Image Source="../Images/paste.png" Height="24" Width="24"></Image>
                </Button>
                <Button Name="BtnUndo">
                    <Image Source="../Images/undo.png" Height="24" Width="24"></Image>
                </Button>
                <Button Name="BtnRedo">
                    <Image Source="../Images/redo.png" Height="24" Width="24"></Image>
                </Button>
                <Button Name="BtnFind">
                    <Image Source="../Images/find.png" Height="24" Width="24"></Image>
                </Button>
                <Button Name="BtnFindReplace">
                    <Image Source="../Images/findreplace.png" Height="24" Width="24"></Image>
                </Button>
            </ToolBar>
        </ToolBarTray>
        <StatusBar DockPanel.Dock="Bottom" VerticalAlignment="Bottom" Height="30"/>
        <TabControl TabStripPlacement="Top" Margin="5" ItemsSource="{Binding Documents}" SelectedItem="{Binding CurrentDocument, Mode=TwoWay}">
            <TabControl.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="10" MaxWidth="10" MinWidth="10"/>
                            <ColumnDefinition Width="10" MaxWidth="10" MinWidth="10"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="{Binding Metadata.FileName}"/>
                        <TextBlock Grid.Column="1" Text="*" Visibility="{Binding IsSaved, Converter={StaticResource VisibilityConverter}}"/>
                        <Button Grid.Column="2" Width="10" Height="10" MaxWidth="10" MaxHeight="10" MinWidth="10" MinHeight="10" VerticalAlignment="Center" HorizontalAlignment="Right" Command="{Binding CloseDocumentButtonCommand}">
                            <TextBlock Text="X" HorizontalAlignment="Center" VerticalAlignment="Center" FontSize="8" FontWeight="Bold"/>
                        </Button>
                    </Grid>
                </DataTemplate>
            </TabControl.ItemTemplate>
            <TabControl.ContentTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Border BorderBrush="Black" BorderThickness="1" Grid.Column="0" Margin="5">
                            <customControls:CodeTextboxHost Text="{Binding Markdown, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" WordWrap="True"/>
                        </Border>
                        <Border BorderBrush="Black" BorderThickness="1" Grid.Column="1" Margin="5">
                            <wpf:ChromiumWebBrowser Address="{Binding Html, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" x:Name="ChromiumWebBrowser"/>    
                        </Border>
                    </Grid>
                </DataTemplate>
            </TabControl.ContentTemplate>
        </TabControl>
    </DockPanel>
</Window>